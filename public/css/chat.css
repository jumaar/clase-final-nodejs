/* --- Estilos del Chat --- */
*,
*::before,
*::after {
  box-sizing: border-box;
}

:root {
  color-scheme: light dark;
}

/*
  La regla 'body' específica para el chat ha sido eliminada.
  Ahora, la página del chat hereda los estilos del 'body' desde 'main.css',
  lo que permite que el cambio de tema funcione correctamente.
*/

#messages {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow-y: scroll;
  height: 100%;
  scroll-behavior: smooth;
  padding-bottom: 48px;
}

#messages {
  display: flex;
  flex-direction: column;
}

/* Estilos para las burbujas de chat */
#messages > li {
  padding: .5rem 1rem;
  margin-bottom: 10px;
  border-radius: 18px;
  max-width: 70%;
  word-wrap: break-word; /* Para que el texto largo no rompa el diseño */
}

#messages > li.sent {
  position: relative; /* Necesario para posicionar el botón de borrar de forma absoluta. */
  align-self: flex-end;
  background-color: #007bff;
  color: white;
  margin-left: 40px; /* Añadimos margen para dar espacio al botón de borrar. */
}

/*
 * Estilos para el botón de borrar.
 * Se hace siempre visible (opacity: 1) para asegurar la funcionalidad en
 * dispositivos táctiles (móviles/celulares) donde el efecto :hover no existe.
*/
.delete-button {
  position: absolute;
  left: -40px; /* Ajustamos la posición a la izquierda, fuera de la burbuja. */
  top: 50%;
  transform: translateY(-50%);
  background: transparent !important; /* Forzamos fondo transparente para anular herencias. */
  border: none;
  font-size: 1rem;
  cursor: pointer;
  color: #aaa;
  opacity: 1;
  padding: 5px;
}

#messages > li.received {
  align-self: flex-start;
  background-color: #e9e9eb;
  color: black;
  margin-right: 40px; /* Añadimos margen para mantener la simetría. */
}

/* Estilos para la cabecera del mensaje (usuario y fecha) */
.message-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 5px;
  font-size: 0.8rem;
  color: #6c757d;
}

#messages > li.sent .message-header {
  color: #f0f0f0; /* Un color más claro para el texto del header en las burbujas enviadas */
}

.message-header strong {
  margin-right: 8px; /* Espacio entre el nombre y la hora */
}

#messages p {
  margin: 0; /* Quitamos el margen por defecto del párrafo */
}

/* Reglas de Modo Oscuro para los Mensajes */
body.dark-mode #messages > li.received {
  background-color: #2c2c2c;
  color: #f0f0f0;
}

#chat {
  border: 1px solid #ccc;
  border-radius: 4px;
  overflow: hidden;
  width: 350px;
  height: 100%;
  position: relative;
}

#form {
  bottom: 0;
  display: flex;
  height: 48px;
  left: 0;
  padding: 4px;
  position: absolute;
  right: 0;
  width: 100%; /* Aseguramos que el formulario ocupe todo el ancho */
}

#input {
  border-radius: 9999px;
  border: 1px solid #eee;
  flex: 1;
  margin: 4px;
  padding: 0 8px;
}

#input:focus {
  outline: 0;
}

#form>button {
  background: #09f;
  color: #fff;
  border: 0;
  margin: 4px;
  border-radius: 4px;
}

#form>button:hover {
  background: #0cf;
}

/* --- Estilos para la Cabecera del Chat y Logout --- */
.chat-header {
  padding: 10px;
  background: #f0f0f0;
  border-bottom: 1px solid #ccc;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.chat-header span {
  font-weight: bold;
}

#logout-button {
  padding: 5px 10px;
  background-color: #dc3545; /* Rojo para una acción destructiva/de salida */
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

#logout-button:hover {
  background-color: #c82333;
}

/* Ajuste para que el chat use flexbox y la cabecera/mensajes/formulario se ordenen correctamente */
#chat {
  display: flex;
  flex-direction: column;
}

#messages {
  flex-grow: 1; /* Esto hace que la lista de mensajes ocupe todo el espacio vertical disponible */
}


body.dark-mode .chat-header {
  background: #2c2c2c;
  border-bottom: 1px solid #444;
}

.header-buttons {
  display: flex;
  align-items: center;
  gap: 10px; /* Espacio entre los botones */
}

.chat-header .theme-toggle-button {
  position: static; /* Anulamos el posicionamiento fijo para que se quede en la cabecera */
  width: 30px;
  height: 30px;
  font-size: 1.1rem;
  border-radius: 50%;
  border: 1px solid #888;
  background: none;
  color: inherit; /* Hereda el color del texto para que cambie en modo oscuro */
  cursor: pointer;
}
